<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Applicative</title>
    <link href="./images/s2.ico"                                   type="image/x-icon" rel="specs2 icon"/>
    <link href="./css/opensans-fonts.css"                          type="text/css"     rel="stylesheet" />
    <link href="./css/bootstrap.min.css"                           type="text/css"     rel="stylesheet" />
    <link href="./css/font-awesome.min.css"                        type="text/css"     rel="stylesheet" />
    <link href="./css/prettify.css"                                type="text/css"     rel="stylesheet" />
    <link href="./css/tabber.css"                                  type="text/css"     rel="stylesheet" />
    <link href="./css/tipuesearch.css"                             type="text/css"     rel="stylesheet" />
    <link href="./css/specs2.css"                                  type="text/css"     rel="stylesheet" />
    <link href="./css/specs2-user.css"                             type="text/css"     rel="stylesheet" />

    <script src="./javascript/jquery.js"                           type="text/javascript"></script>
    <script src="./javascript/jquery.jstree.js"                    type="text/javascript"></script>
    <script src="./javascript/tabber.js"                           type="text/javascript"></script>
    <script src="./javascript/tabber_start.js"                     type="text/javascript"></script>
    <script src="./javascript/prettify.js"                         type="text/javascript"></script>
    <script src="./javascript/specs2.js"                           type="text/javascript"></script>
    <script src="./javascript/specs2-user.js"                      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_set.js"      type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch_contents.js" type="text/javascript"></script>
    <script src="./javascript/tipuesearch/tipuesearch.min.js"      type="text/javascript"></script>

</head>
<body onload="prettyPrint()">

<div class="container">

<div class="col-md-1"></div>

<div class="col-md-1"></div>




<div class="col-md-10">
<h1>Applicative</h1>
<div id="tipue_search_content"></div>

<p>The default interpretation of <code class="prettyprint">Eff</code> values is “monadic” meaning that effectful values are being evaluated in order. This becomes clear when traversing a list of values with the <code class="prettyprint">FutureEffect</code>:</p>
<pre><code class="prettyprint">import org.atnos.eff._, all._
import org.atnos.eff.syntax.eval._
import org.atnos.eff.syntax.future._
import org.atnos.eff.syntax.writer._
import org.atnos.eff.syntax.eff._
import cats.Eval
import cats.data.Writer
import cats.syntax.traverse._
import cats.std.list._
import scala.concurrent._, duration._, ExecutionContext.Implicits.global

type Future_[X] = Member[Future, X]
type Eval_[X] = Member[Eval, X]
type Writer_[X] = Member[Writer[String, ?], X]
type S = Eval |: Future |: Writer[String, ?] |: NoEffect

def execute[E : Eval_ : Writer_ : Future_](i: Int): Eff[E, Int] =
  for {
    i1 &lt;- delay(i)
    i2 &lt;- async(i1)
    _  &lt;- tell(i2.toString)
  } yield i2

val action: Eff[S, List[Int]] = List(1000, 500, 50).traverse(execute[S])
action.runEval.awaitFuture(2.seconds).runWriterLog.run</code></pre>
<p><code class="prettyprint">&gt; List(1000, 500, 50)</code></p>
<p>We can however run all those computations concurrently using the applicative execution for <code class="prettyprint">Eff</code>:</p>
<pre><code class="prettyprint">import org.atnos.eff._, all._
import org.atnos.eff.syntax.eval._
import org.atnos.eff.syntax.future._
import org.atnos.eff.syntax.writer._
import org.atnos.eff.syntax.eff._
import cats.Eval
import cats.data.Writer
import cats.std.list._
import scala.concurrent._, duration._, ExecutionContext.Implicits.global

type Future_[X] = Member[Future, X]
type Eval_[X] = Member[Eval, X]
type Writer_[X] = Member[Writer[String, ?], X]
type S = Eval |: Future |: Writer[String, ?] |: NoEffect

def execute[E: Eval_ : Writer_ : Future_](i: Int): Eff[E, Int] =
  for {
    i1 &lt;- delay(i)
    i2 &lt;- async(i1)
    _ &lt;- tell(i2.toString)
  } yield i2

val action: Eff[S, List[Int]] = List(1000, 500, 50).traverseA(execute[S])
action.runEval.awaitFuture(2.seconds).runWriterLog.run</code></pre>
<p><code class="prettyprint">&gt; List(50, 500, 1000)</code></p>
</div>

</div>

</body>
</html>